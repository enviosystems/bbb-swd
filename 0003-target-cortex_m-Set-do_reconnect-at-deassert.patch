From f18c59ca303931627155bffe9de993a499a9f006 Mon Sep 17 00:00:00 2001
From: NIIBE Yutaka <gniibe@fsij.org>
Date: Tue, 21 Aug 2018 18:57:18 +0900
Subject: [PATCH 3/4] target: cortex_m: Set do_reconnect at deassert.

--

This is needed for FSM-55 reset.
---
 src/target/cortex_m.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/src/target/cortex_m.c b/src/target/cortex_m.c
index 36a77467..6a0ffdad 100644
--- a/src/target/cortex_m.c
+++ b/src/target/cortex_m.c
@@ -1122,6 +1122,8 @@ static int cortex_m_deassert_reset(struct target *target)
 		}
 	}
 
+	armv7m->debug_ap->dap->do_reconnect = true;
+
 	return ERROR_OK;
 }
 
-- 
2.18.0

